<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c5282">
    <title>Immunization Tracker PWA - IA2030 Compliant</title>
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.0/firebase-auth-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Auth Screen -->
    <div id="auth-screen" class="screen active">
        <div class="auth-container">
            <div class="app-logo">
                <i class="fas fa-syringe"></i>
                <h1>Immunization Tracker</h1>
                <p class="subtitle">IA2030 Compliant PWA</p>
            </div>
            
            <div id="login-form" class="auth-form active">
                <h2>Login</h2>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="login-email" placeholder="Email address" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="login-password" placeholder="Password" required>
                </div>
                <div id="login-error" class="error-message"></div>
                <button id="login-btn" class="btn-primary">Login</button>
                <p class="auth-switch">New user? <a href="#" id="show-register">Register here</a></p>
            </div>
            
            <div id="register-form" class="auth-form">
                <h2>Register</h2>
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="register-name" placeholder="Full name" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" id="register-email" placeholder="Email address" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="register-password" placeholder="Password (min 6 chars)" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-hospital"></i>
                    <input type="text" id="register-facility" placeholder="Facility name" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-map-marker-alt"></i>
                    <input type="text" id="register-location" placeholder="Facility location" required>
                </div>
                <div class="input-group">
                    <i class="fas fa-id-card"></i>
                    <input type="text" id="register-code" placeholder="Facility code (e.g., FAC001)" required>
                </div>
                <button id="register-btn" class="btn-primary">Register</button>
                <p class="auth-switch">Already have account? <a href="#" id="show-login">Login here</a></p>
                <p class="note">Note: Registration requires admin approval</p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app-screen" class="screen">
        <!-- Header -->
        <header class="app-header">
            <button id="menu-toggle" class="icon-btn">
                <i class="fas fa-bars"></i>
            </button>
            <div class="header-title">
                <h1 id="page-title">Dashboard</h1>
                <p id="facility-info" class="facility-info"></p>
            </div>
            <div class="header-actions">
                <button id="sync-status" class="sync-btn offline" title="Offline">
                    <i class="fas fa-cloud"></i>
                </button>
                <button id="notifications-btn" class="icon-btn">
                    <i class="fas fa-bell"></i>
                    <span id="notification-count" class="badge">0</span>
                </button>
                <div class="user-dropdown">
                    <button id="user-menu" class="user-btn">
                        <i class="fas fa-user-circle"></i>
                        <span id="user-name"></span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu">
                        <a href="#" data-page="profile"><i class="fas fa-user"></i> Profile</a>
                        <a href="#" data-page="settings"><i class="fas fa-cog"></i> Settings</a>
                        <div class="divider"></div>
                        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                    </div>
                </div>
            </div>
        </header>

        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-syringe"></i>
                <h2>Immunization</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#" data-page="dashboard" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" data-page="children"><i class="fas fa-child"></i> Children</a></li>
                <li><a href="#" data-page="vaccines"><i class="fas fa-shield-alt"></i> Vaccines</a></li>
                <li><a href="#" data-page="reports"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="#" data-page="stock"><i class="fas fa-warehouse"></i> Stock</a></li>
                <li><a href="#" data-page="cold-chain"><i class="fas fa-snowflake"></i> Cold Chain</a></li>
                <li class="admin-only"><a href="#" data-page="facilities"><i class="fas fa-hospital"></i> Facilities</a></li>
                <li class="admin-only"><a href="#" data-page="users"><i class="fas fa-users"></i> Users</a></li>
                <li><a href="#" data-page="audit"><i class="fas fa-history"></i> Audit Log</a></li>
            </ul>
            <div class="sidebar-footer">
                <div class="offline-indicator">
                    <div class="indicator offline"></div>
                    <span>Offline Mode</span>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <div id="dashboard-page" class="page active">
                <!-- Dashboard content will be loaded here -->
            </div>
            
            <div id="children-page" class="page">
                <!-- Children management page -->
            </div>
            
            <div id="vaccines-page" class="page">
                <!-- Vaccines tracking page -->
            </div>
            
            <div id="reports-page" class="page">
                <!-- Reports page -->
            </div>
            
            <div id="stock-page" class="page">
                <!-- Stock management page -->
            </div>
            
            <div id="cold-chain-page" class="page">
                <!-- Cold chain page -->
            </div>
            
            <div id="facilities-page" class="page">
                <!-- Facilities management (admin only) -->
            </div>
            
            <div id="users-page" class="page">
                <!-- Users management (admin only) -->
            </div>
            
            <div id="audit-page" class="page">
                <!-- Audit log page -->
            </div>
            
            <div id="profile-page" class="page">
                <!-- Profile page -->
            </div>
            
            <div id="settings-page" class="page">
                <!-- Settings page -->
            </div>
        </main>

        <!-- Notifications Panel -->
        <div id="notifications-panel" class="notifications-panel">
            <div class="panel-header">
                <h3>Notifications</h3>
                <button id="close-notifications" class="icon-btn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notifications-list">
                <!-- Notifications will be loaded here -->
            </div>
        </div>

        <!-- Install Prompt -->
        <div id="install-prompt" class="install-prompt">
            <div class="prompt-content">
                <i class="fas fa-mobile-alt"></i>
                <div class="prompt-text">
                    <h4>Install Immunization Tracker</h4>
                    <p>Install this app on your device for better experience</p>
                </div>
                <button id="install-btn" class="btn-primary">Install</button>
                <button id="dismiss-install" class="btn-secondary">Later</button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="add-child-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Register New Child</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="child-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>First Name *</label>
                            <input type="text" id="child-first-name" required>
                        </div>
                        <div class="form-group">
                            <label>Last Name *</label>
                            <input type="text" id="child-last-name" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Date of Birth *</label>
                        <input type="date" id="child-dob" required max="">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Gender *</label>
                            <select id="child-gender" required>
                                <option value="">Select</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Weight (kg)</label>
                            <input type="number" id="child-weight" step="0.1">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Guardian Name *</label>
                        <input type="text" id="child-guardian" required>
                    </div>
                    <div class="form-group">
                        <label>Guardian Phone *</label>
                        <input type="tel" id="child-phone" required>
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <textarea id="child-address" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Special Notes</label>
                        <textarea id="child-notes" rows="2"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary close-modal">Cancel</button>
                        <button type="submit" class="btn-primary">Register Child</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <script src="/app.js"></script>
</body>
</html>